# üë§ Seed Colaborador Prefeitura - Opera√ß√µes Municipais

Este arquivo cont√©m um seed especializado que demonstra **todos os m√≥dulos e funcionalidades** que um usu√°rio do tipo **COLABORADOR_PREFEITURA** pode gerenciar no sistema.

## üéØ Objetivo

Criar um ambiente completo de testes focado nas **opera√ß√µes municipais do dia a dia**, incluindo:
- ‚úÖ Cadastro de motoristas municipais
- ‚úÖ Cadastro de ve√≠culos dos √≥rg√£os
- ‚úÖ Cria√ß√£o de categorias organizacionais
- ‚úÖ Solicita√ß√µes de abastecimento
- ‚úÖ Visualiza√ß√£o de dados dos seus √≥rg√£os
- ‚úÖ Acompanhamento de cotas e consumo

## üöÄ Como Executar

### M√©todo 1: Comando NPM (Recomendado)
```bash
npm run seed:colaborador-pref
```

### M√©todo 2: Execu√ß√£o Direta
```bash
npx ts-node prisma/seed_colaborador_pref.ts
```

### M√©todo 3: Script de Setup
```bash
# Windows
scripts/setup-colaborador-pref.bat

# Linux/Mac
chmod +x scripts/setup-colaborador-pref.sh
./scripts/setup-colaborador-pref.sh
```

## üìä Cen√°rio Implementado

### üèõÔ∏è **Prefeitura Municipal de Ribeir√£o Preto**
- **CNPJ**: `22333444000177`
- **Email**: `admin@ribeiraopreto.sp.gov.br`
- **Localiza√ß√£o**: Ribeir√£o Preto, SP
- **Status**: Ativa, com cupom fiscal obrigat√≥rio

### üë§ **Colaboradora Principal - Fernanda Santos**
- **Nome**: Fernanda Santos Silva
- **Email**: `fernanda.santos@ribeiraopreto.sp.gov.br`
- **CPF**: `11223344556`
- **Telefone**: `16988776655`
- **√ìrg√£os**: SMS (principal) + SME (apoio)
- **Fun√ß√£o**: Respons√°vel por cadastros operacionais

## üìã Dados Criados Detalhadamente

### üè¢ **1. √ìRG√ÉOS MUNICIPAIS (3 secretarias - contexto)**

| √ìrg√£o | Sigla | Responsabilidade |
|-------|-------|------------------|
| **Secretaria Municipal de Sa√∫de** | SMS | Ambul√¢ncias e fiscaliza√ß√£o sanit√°ria |
| **Secretaria Municipal de Educa√ß√£o** | SME | Transporte educacional |
| **Secretaria Municipal de Transportes** | SMT | Transporte p√∫blico |

### üë• **2. EQUIPE MUNICIPAL (4 usu√°rios)**

| Nome | Email | Tipo | √ìrg√£o(s) |
|------|--------|------|----------|
| **Fernanda Santos Silva** | `fernanda.santos@ribeiraopreto.sp.gov.br` | **COLABORADOR** | SMS + SME |
| **Marcos Lima Costa** | `marcos.lima@ribeiraopreto.sp.gov.br` | COLABORADOR | SME |
| **Patr√≠cia Alves Mendes** | `patricia.alves@ribeiraopreto.sp.gov.br` | COLABORADOR | SMT |
| **Sandra Regina Oliveira** | `admin@ribeiraopreto.sp.gov.br` | ADMIN | Todos |

### üìÇ **3. CATEGORIAS CRIADAS (6 organizacionais)**

#### **Categorias de Ve√≠culos (4):**
- **Emerg√™ncia M√©dica** - Ambul√¢ncias UTI e emerg√™ncia
- **Transporte de Pacientes** - Ambul√¢ncias b√°sicas e transporte m√©dico
- **Transporte Educacional** - Ve√≠culos para atividades educacionais
- **Ve√≠culos de Inspe√ß√£o** - Carros para fiscaliza√ß√£o sanit√°ria

#### **Categorias de Motoristas (2):**
- **Motoristas de Emerg√™ncia** - Condutores especializados em emerg√™ncia
- **Motoristas de Transporte** - Condutores para transporte geral

### üöó **4. MOTORISTAS CADASTRADOS (5 condutores)**

| Nome | CPF | CNH | Cat. | Especialidade |
|------|-----|-----|------|---------------|
| **Roberto Carlos Mendes** | `12312312300` | `11223344556` | D | UTI e Emerg√™ncias |
| **Cl√°udio Ferreira Silva** | `23423423411` | `22334455667` | D | Ambul√¢ncia B√°sica |
| **Luciana Pereira Santos** | `34534534522` | `33445566778` | B | Transporte Educacional |
| **Anderson Luis Rodrigues** | `45645645633` | `44556677889` | B | Fiscaliza√ß√£o Sanit√°ria |
| **Regina Aparecida Costa** | `56756756744` | `55667788990` | D | Transporte Escolar |

### üöë **5. FROTA CADASTRADA (5 ve√≠culos)**

#### **üöë Secretaria de Sa√∫de (3 ve√≠culos)**
- **Ambul√¢ncia UTI 02** - `RIB1234` - Mercedes Sprinter 319/2022
  - UTI m√≥vel com equipamentos avan√ßados
  - Capacidade: 90L, Tipo: COTA, Periodicidade: Semanal (180L)
- **Ambul√¢ncia B√°sica 03** - `RIB5678` - Fiat Ducato 2.8/2021
  - Transporte inter-hospitalar e remo√ß√µes
  - Capacidade: 85L, Tipo: COTA, Periodicidade: Semanal (140L)
- **Carro Inspe√ß√£o Sanit√°ria 01** - `RIB3456` - Chevrolet Onix Plus/2023
  - Vigil√¢ncia sanit√°ria e fiscaliza√ß√£o
  - Capacidade: 44L, Tipo: COM_AUTORIZACAO

#### **üöå Secretaria de Educa√ß√£o (2 ve√≠culos)**
- **Van Educacional 01** - `RIB9012` - Ford Transit 350L/2023
  - 15 passageiros para atividades educacionais
  - Capacidade: 80L, Tipo: LIVRE
- **Carro Administrativo Educa√ß√£o** - `RIB7890` - Volkswagen Virtus/2022
  - Ve√≠culo administrativo da SME
  - Capacidade: 50L, Tipo: COM_AUTORIZACAO

### üìã **6. PROCESSO LICITAT√ìRIO (contexto)**

**Processo Principal:**
- **N√∫mero**: `PROC-RIB-2024-001`
- **Documento**: `LICIT-RIB-2024-001`
- **Valor Estimado**: R$ 280.000,00
- **Litros Estimados**: 35.000L anuais
- **Status**: ATIVO

**Combust√≠veis Contemplados:**
- **Gasolina Comum**: 12.000L - R$ 5,90/L
- **Etanol**: 8.000L - R$ 4,60/L  
- **Diesel S10**: 15.000L - R$ 6,30/L

### üìä **7. COTAS POR √ìRG√ÉO (5 cotas - contexto)**

| √ìrg√£o | Combust√≠vel | Cota Total | Utilizado | Restante | Saldo (R$) |
|-------|-------------|------------|-----------|----------|------------|
| **SMS** | Diesel S10 | 8.000L | 1.200L | 6.800L | R$ 42.840 |
| **SMS** | Gasolina | 2.000L | 300L | 1.700L | R$ 10.030 |
| **SME** | Diesel S10 | 4.000L | 800L | 3.200L | R$ 20.160 |
| **SME** | Gasolina | 1.500L | 250L | 1.250L | R$ 7.375 |
| **SME** | Etanol | 1.000L | 150L | 850L | R$ 3.910 |

### ‚ö†Ô∏è **8. SOLICITA√á√ïES DE ABASTECIMENTO (4 solicita√ß√µes)**

| Ve√≠culo | Motorista | Combust√≠vel | Quantidade | Status | Valor |
|---------|-----------|-------------|------------|--------|-------|
| **Ambul√¢ncia UTI** | Roberto | Diesel S10 | 85L | PENDENTE | R$ 535,50 |
| **Ambul√¢ncia B√°sica** | Cl√°udio | Diesel S10 | 75L | APROVADA | R$ 472,50 |
| **Carro Inspe√ß√£o** | Anderson | Gasolina | 40L | APROVADA | R$ 236,00 |
| **Van Educacional** | Luciana | Diesel S10 | 70L | PENDENTE | R$ 441,00 |

### ‚õΩ **9. ABASTECIMENTOS REALIZADOS (2 aprovados)**

| Ve√≠culo | Motorista | Combust√≠vel | Quantidade | Valor | Data |
|---------|-----------|-------------|------------|-------|------|
| **Ambul√¢ncia B√°sica** | Cl√°udio | Diesel S10 | 75L | R$ 468,75 | 20/03 17:30 |
| **Carro Inspe√ß√£o** | Anderson | Gasolina | 40L | R$ 234,00 | 21/03 11:15 |

## üîê Credenciais de Acesso

### Colaboradora Principal
```
üìß Email: fernanda.santos@ribeiraopreto.sp.gov.br
üîë Senha: 123456
üë§ Tipo: COLABORADOR_PREFEITURA
üèõÔ∏è Prefeitura: Ribeir√£o Preto
üè¢ √ìrg√£os: SMS (Sa√∫de) + SME (Educa√ß√£o)
```

### Outros Colaboradores (mesma senha)
```
üîë Senha: 123456
üë• Usu√°rios:
   ‚Ä¢ marcos.lima@ribeiraopreto.sp.gov.br (SME)
   ‚Ä¢ patricia.alves@ribeiraopreto.sp.gov.br (SMT)
   ‚Ä¢ admin@ribeiraopreto.sp.gov.br (ADMIN - contexto)
```

## üéØ M√≥dulos Acess√≠veis ao COLABORADOR_PREFEITURA

### ‚úÖ **Gest√£o de Categorias**
- **Criar** categorias para organiza√ß√£o
- **Classificar** ve√≠culos por tipo
- **Organizar** motoristas por especialidade
- **Facilitar** buscas e relat√≥rios
- **Personalizar** classifica√ß√µes da prefeitura

### ‚úÖ **Gest√£o de Motoristas**
- **Cadastrar** condutores municipais
- **Gerenciar** CNH e documentos
- **Controlar** vencimentos
- **Atualizar** dados pessoais
- **Associar** a ve√≠culos espec√≠ficos
- **Classificar** por especialidade

### ‚úÖ **Gest√£o de Ve√≠culos (dos seus √≥rg√£os)**
- **Cadastrar** ve√≠culos dos √≥rg√£os vinculados
- **Definir** tipo de abastecimento
- **Configurar** cotas (se COTA)
- **Associar** combust√≠veis permitidos
- **Vincular** motoristas habilitados
- **Gerenciar** documenta√ß√£o
- **Atualizar** dados t√©cnicos

### ‚úÖ **Solicita√ß√µes de Abastecimento**
- **Criar** solicita√ß√µes para ve√≠culos
- **Definir** quantidade necess√°ria
- **Escolher** posto/empresa
- **Acompanhar** status da solicita√ß√£o
- **Visualizar** hist√≥rico de solicita√ß√µes
- **Cancelar** solicita√ß√µes pendentes

### ‚úÖ **Visualiza√ß√£o e Relat√≥rios**
- **Ver** dados da sua prefeitura
- **Consultar** √≥rg√£os vinculados
- **Acompanhar** cotas dos seus √≥rg√£os
- **Visualizar** hist√≥rico de abastecimentos
- **Monitorar** consumo da frota
- **Gerar** relat√≥rios operacionais

### ‚úÖ **Gest√£o do Pr√≥prio Perfil**
- **Atualizar** dados pessoais
- **Alterar** senha
- **Gerenciar** contatos
- **Visualizar** hist√≥rico de a√ß√µes

## üö´ Limita√ß√µes do COLABORADOR_PREFEITURA

### ‚ùå **N√ÉO Pode Gerenciar:**
- **Outras prefeituras** (s√≥ a sua)
- **Criar usu√°rios** (s√≥ admin pode)
- **Criar √≥rg√£os** (s√≥ admin pode)
- **Definir cotas** (s√≥ admin pode)
- **Aprovar abastecimentos** (s√≥ admin pode)
- **Criar processos licitat√≥rios** (s√≥ admin pode)
- **Gerenciar empresas/postos** (s√≥ visualiza)
- **Alterar combust√≠veis** (s√≥ usa existentes)
- **Acessar √≥rg√£os n√£o vinculados**

### ‚ö†Ô∏è **Limita√ß√µes Espec√≠ficas:**
- **Ve√≠culos**: S√≥ dos √≥rg√£os que est√° vinculado
- **Solicita√ß√µes**: S√≥ pode criar, n√£o aprovar
- **Relat√≥rios**: Apenas dos seus √≥rg√£os
- **Cotas**: S√≥ visualiza, n√£o define
- **Usu√°rios**: N√£o pode criar nem editar outros

### üëÅÔ∏è **Apenas Visualiza:**
- **Postos dispon√≠veis** para abastecimento
- **Pre√ßos de combust√≠veis** atuais
- **Cotas definidas** pelo admin
- **Processos licitat√≥rios** da prefeitura
- **Dados de outros √≥rg√£os** (limitado)

## üìà Cen√°rios de Teste

### ‚úÖ **Cen√°rio 1: Rotina Di√°ria do Colaborador**
1. Login como Fernanda Santos
2. Visualizar dashboard dos seus √≥rg√£os
3. Cadastrar novo motorista para ambul√¢ncia
4. Solicitar abastecimento para ve√≠culo
5. Acompanhar status das solicita√ß√µes

### ‚úÖ **Cen√°rio 2: Cadastro de Nova Frota**
1. Criar categoria espec√≠fica
2. Cadastrar novos motoristas
3. Cadastrar ve√≠culos para SMS
4. Associar motoristas aos ve√≠culos
5. Configurar combust√≠veis permitidos

### ‚úÖ **Cen√°rio 3: Gest√£o de Abastecimentos**
1. Verificar cotas dispon√≠veis
2. Criar solicita√ß√£o de abastecimento
3. Definir quantidade e posto
4. Acompanhar aprova√ß√£o pelo admin
5. Visualizar hist√≥rico ap√≥s efetiva√ß√£o

### ‚úÖ **Cen√°rio 4: Organiza√ß√£o e Relat√≥rios**
1. Criar categorias organizacionais
2. Classificar ve√≠culos e motoristas
3. Gerar relat√≥rios por categoria
4. Monitorar consumo dos √≥rg√£os
5. Acompanhar performance da frota

## üîÑ Compara√ß√£o com Outros Perfis

| Funcionalidade | SUPER_ADMIN | ADMIN_PREFEITURA | **COLABORADOR_PREFEITURA** |
|----------------|-------------|------------------|---------------------------|
| **Criar Prefeituras** | ‚úÖ | ‚ùå | ‚ùå |
| **Criar √ìrg√£os** | ‚úÖ | ‚úÖ | ‚ùå |
| **Criar Usu√°rios** | ‚úÖ | ‚úÖ | ‚ùå |
| **Criar Categorias** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Cadastrar Motoristas** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Cadastrar Ve√≠culos** | ‚úÖ | ‚úÖ | ‚úÖ (s√≥ seus √≥rg√£os) |
| **Criar Processos** | ‚úÖ | ‚úÖ | ‚ùå |
| **Definir Cotas** | ‚úÖ | ‚úÖ | ‚ùå |
| **Solicitar Abastecimento** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Aprovar Abastecimento** | ‚úÖ | ‚úÖ | ‚ùå |
| **Gerenciar Empresas** | ‚úÖ | ‚ùå | ‚ùå |
| **Scope de Acesso** | Sistema | Prefeitura | √ìrg√£os Vinculados |

## üö® Pr√©-requisitos

### ‚ö†Ô∏è **Antes de Executar:**
- **PostgreSQL rodando** em `localhost:5432`
- **Banco de dados criado** (conforme `.env`)
- **Prisma Client gerado** (`npx prisma generate`)
- **Depend√™ncias instaladas** (`npm install`)
- **Migra√ß√µes aplicadas** (`npx prisma migrate deploy`)

### üîÑ **Setup Completo:**
```bash
# 1. Configurar ambiente
cp .env.example .env
# Editar DATABASE_URL

# 2. Instalar depend√™ncias
npm install

# 3. Configurar banco
npx prisma generate
npx prisma migrate reset --force

# 4. Executar seed
npm run seed:colaborador-pref
```

## üéâ Resultado Esperado

Ap√≥s executar o seed, voc√™ ter√°:
- ‚úÖ **Prefeitura completa** (Ribeir√£o Preto)
- ‚úÖ **Colaboradora principal** com acesso a 2 √≥rg√£os
- ‚úÖ **5 motoristas** cadastrados operacionalmente
- ‚úÖ **5 ve√≠culos** de diferentes tipos
- ‚úÖ **6 categorias** organizacionais
- ‚úÖ **4 solicita√ß√µes** de abastecimento
- ‚úÖ **Hist√≥rico de abastecimentos** aprovados
- ‚úÖ **Cotas e processo** municipal ativo

**Agora voc√™ pode testar todas as funcionalidades operacionais que um COLABORADOR_PREFEITURA pode realizar!** üë§üöÄ

## üí° Dicas de Uso

### **Para Testes Operacionais:**
- Use Fernanda Santos para opera√ß√µes do dia a dia
- Teste cadastros de motoristas e ve√≠culos
- Experimente criar diferentes categorias
- Fa√ßa solicita√ß√µes de abastecimento

### **Para Testes de Limita√ß√µes:**
- Tente acessar funcionalidades n√£o permitidas
- Verifique limita√ß√µes por √≥rg√£o
- Teste aprova√ß√µes (n√£o deve conseguir)

### **Para Demonstra√ß√µes:**
- Mostre a diferen√ßa entre colaborador e admin
- Demonstre o fluxo operacional t√≠pico
- Apresente relat√≥rios por √≥rg√£o
